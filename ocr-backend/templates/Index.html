<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parking Sign Scanner</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: url('https://nycdotsigns.net/signs.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #cbd5e1;
            overflow-x: hidden;
            min-height: 100vh; 
            padding-top: 64px; /* Space for the fixed navbar */
        }

        /* --- Parallax Background --- */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: inherit;
            background-attachment: fixed;
            filter: blur(2px) brightness(0.7); /* Slightly reduced blur/brightness */
            z-index: -1;
            transform: scale(1.1);
        }

        .file-upload-input {
            display: none;
        }

        /* --- File Upload Label Styling (Classy Hover/Drag Zone) --- */
        .file-upload-label {
            cursor: pointer;
            padding: 1.5rem 2.5rem;
            border: 2px dashed #63b3ed;
            border-radius: 1.5rem;
            transition: all 0.4s ease-in-out; 
            background-color: rgba(47, 62, 70, 0.6); /* More transparent background */
            backdrop-filter: blur(15px); /* Increased blur for better separation */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.6);
        }
        
        /* New Animation: Border Pulse */
        @keyframes borderPulse {
            0% { border-color: #63b3ed; }
            50% { border-color: #ffffff; }
            100% { border-color: #63b3ed; }
        }

        /* Subtle hover effect & Animation trigger on drag-over */
        .file-upload-label:hover, .file-upload-label.drag-over {
            border-color: #3b82f6; 
            background-color: rgba(59, 130, 246, 0.2); 
            box-shadow: inset 0 0 25px rgba(0, 0, 0, 0.8); 
            transform: scale(1.005);
            animation: borderPulse 1.5s infinite alternate; /* Apply border pulse */
        }

        .file-upload-label:hover svg {
            transform: scale(1.1);
            animation: pulse-icon 0.5s ease-in-out;
        }
        .file-upload-label, .file-upload-label svg {
            transition: all 0.3s ease-in-out;
        }
        @keyframes pulse-icon {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); } 
            100% { transform: scale(1); }
        }

        /* --- Custom Spinner --- */
        @keyframes spin { to { transform: rotate(360deg); } }
        .spinner { animation: spin 1s linear infinite; }

        /* --- Floating container --- */
        .floating { animation: floating 8s ease-in-out infinite; } /* Slower float */
        @keyframes floating { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} } /* Reduced float distance */

        /* --- Typing effect --- */
        .typing {
            border-right: 3px solid #3b82f6;
            white-space: nowrap; 
            overflow: hidden;
            animation: blink .75s step-end infinite; 
        }
        .summary-content-typing {
             border-right: 3px solid #3b82f6;
             white-space: nowrap;
             overflow: hidden;
             animation: blink .75s step-end infinite;
        }
        .summary-ready { border-right: none; animation: none; }
        @keyframes blink { 50% { border-color: transparent } }

        /* --- Button shine --- */
        .shine { position: relative; overflow: hidden; }
        .shine::before {
            content:""; position:absolute; top:-50%; left:-50%; width:200%; height:200%;
            background: linear-gradient(120deg,transparent,rgba(255,255,255,0.4),transparent);
            transform:rotate(25deg); animation: shine 3s infinite;
        }
        @keyframes shine { 0%{transform:translateX(-100%) rotate(25deg)} 100%{transform:translateX(100%) rotate(25deg)} }

        /* --- Ripple effect on button click --- */
        .ripple { position: relative; overflow: hidden; }
        .ripple span {
            position:absolute; border-radius:50%; transform:scale(0);
            animation:ripple 0.6s linear; background:rgba(255,255,255,0.6);
        }
        @keyframes ripple { to { transform:scale(4); opacity:0; } }

        /* --- Confetti burst --- */
        .confetti {
            position: fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:9999;
        }
        .confetti-piece {
            width:10px; height:20px; background:var(--c);
            position:absolute; top:0; animation:fall 3s linear forwards;
            border-radius: 2px;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotateZ(360deg); opacity:0; }
        }
        
        /* --- Bouncy entrance for cards --- */
        .bounce-in { animation: bounce-in 0.8s ease forwards; }
        @keyframes bounce-in { 
            0% { transform: scale(0.8); opacity: 0; } 
            60% { transform: scale(1.05); opacity: 1; } 
            100% { transform: scale(1); } 
        }

        /* --- Glass gradient animation for cards --- */
        .glass-gradient {
            background: linear-gradient(135deg, rgba(45,55,72,0.6), rgba(59,130,246,0.1)); /* Lighter base and accent */
            background-size: 200% 200%;
            backdrop-filter: blur(18px); /* Increased blur */
            animation: gradientShift 15s ease infinite alternate; /* Slower animation */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
        }
        @keyframes gradientShift {
            from { background-position: 0% 50%; }
            to { background-position: 100% 50%; }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <!-- Navbar -->
    <nav class="w-full flex justify-center py-4 bg-gray-900/40 backdrop-blur-md fixed top-0 z-50">
        <ul class="flex space-x-8 text-gray-300 text-sm font-semibold">
            <li><a href="javascript:void(0)" class="hover:text-blue-300 transition-colors duration-200">Home</a></li>
            <li><a href="javascript:void(0)" class="hover:text-blue-300 transition-colors duration-200">Parking</a></li>
            <li><a href="javascript:void(0)" class="hover:text-blue-300 transition-colors duration-200">Signs</a></li>
            <li><a href="javascript:void(0)" class="hover:text-blue-300 transition-colors duration-200">About</a></li>
            <li><a href="javascript:void(0)" class="hover:text-blue-300 transition-colors duration-200">Contact</a></li>
        </ul>
    </nav>

    <div class="main-container bg-gray-800/50 p-8 md:p-12 rounded-3xl shadow-2xl w-full max-w-3xl text-center border border-gray-700 backdrop-blur-sm floating">
        <h1 class="text-4xl md:text-5xl font-extrabold text-gray-100 mb-2">Parking Sign Scanner</h1>
        <p class="text-gray-300 mb-8 max-w-lg mx-auto">Upload a picture of a confusing parking sign, and we'll tell you the rules in a simple summary.</p>

        <!-- Upload -->
        <div class="mb-6">
            <label for="image-upload" id="upload-label" class="file-upload-label text-gray-300 hover:text-gray-100 font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                <span id="upload-text">Drag & Drop or Click to Select Image</span>
            </label>
            <input type="file" id="image-upload" accept="image/*" class="file-upload-input">
        </div>

        <!-- Button with Ripple + Shine -->
        <button id="submit-button" class="shine ripple w-full md:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-full shadow-lg hover:bg-blue-700 transition">
            Submit
        </button>

        <!-- Language Selector -->
        <div class="my-10 flex items-center justify-center gap-4">
            <label for="language-select" class="block text-gray-300 text-sm font-semibold">Translate to:</label>
            <div class="relative w-full md:w-1/2">
                <select id="language-select" class="block appearance-none w-full p-3 pr-10 border border-gray-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent cursor-pointer bg-gray-700 text-gray-300">
                    <option value="en" selected>English</option>
                    <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                    <option value="es">Espa√±ol</option>
                    <option value="fr">Fran√ßais</option>
                    <option value="de">Deutsch</option>
                    <option value="ja">Êó•Êú¨Ë™û</option>
                    <option value="zh">‰∏≠Êñá</option>
                    <option value="it">Italiano</option>
                    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                    <option value="pt">Portugu√™s</option>
                    <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                    <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                    <option value="vi">Ti·∫øng Vi·ªát</option>
                    <option value="tr">T√ºrk√ße</option>
                    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-300">
                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                </div>
            </div>
        </div>

        <!-- Processing Indicator -->
        <div id="loading" class="hidden flex items-center justify-center p-4 bg-gray-800 rounded-lg">
            <div class="spinner w-8 h-8 rounded-full border-4 border-t-4 border-gray-600 border-solid border-t-blue-500"></div>
            <span class="ml-4 text-blue-400 font-semibold">Processing your image...</span>
        </div>

        <!-- Results -->
        <div id="results" class="hidden text-left mt-8 space-y-6">
            <div id="summary-card" class="p-4 rounded-xl shadow-md border border-gray-600 bounce-in glass-gradient">
                <h2 class="text-xl font-bold text-gray-100 mb-2">üö¶ Parking Rules Summary</h2>
                <div id="summary-content" class="text-gray-300 leading-relaxed"></div>
            </div>
            <div id="translation-card" class="p-4 rounded-xl shadow-md border border-gray-600 bounce-in glass-gradient">
                <h2 class="text-xl font-bold text-gray-100 mb-2">üåç Translated Summary</h2>
                <div id="translation-content" class="text-gray-300 leading-relaxed"></div>
            </div>
        </div>

    </div>

    <!-- Confetti container -->
    <div class="confetti" id="confetti"></div>
    <script src="{{ url_for('static', filename='ai.js') }}"></script>
</body>
</html>
